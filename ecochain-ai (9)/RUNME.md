# EcoChain AI 运行指南

## 目录
- [环境要求](#环境要求)
- [快速开始](#快速开始)
- [详细启动步骤](#详细启动步骤)
- [使用说明](#使用说明)
- [常见问题](#常见问题)
- [演示账号](#演示账号)

## 环境要求

在开始之前，请确保您的系统满足以下要求：

- **Node.js**: v14.0.0 或更高版本
- **npm**: v6.0.0 或更高版本
- **浏览器**: Chrome 80+, Firefox 75+, Safari 13+, Edge 80+

## 快速开始

如果您熟悉Node.js开发环境，可以通过以下快速命令启动应用：

```bash
# 克隆代码库
git clone https://github.com/yourusername/ecochain-ai.git
cd ecochain-ai

# 安装依赖
npm install

# 启动应用（同时启动前端和后端）
npm run start
```

## 详细启动步骤

### 1. 环境准备

首先，检查您的Node.js和npm版本：

```bash
node -v
npm -v
```

如果版本低于要求，请前往[Node.js官网](https://nodejs.org/)下载并安装最新版本。

### 2. 获取代码

克隆代码库到本地：

```bash
git clone https://github.com/yourusername/ecochain-ai.git
cd ecochain-ai
```

### 3. 安装依赖

安装项目所需的所有依赖：

```bash
npm install
```

这将安装前端和后端所需的所有依赖包。

### 4. 配置环境变量

创建`.env`文件，配置必要的环境变量：

```bash
# 复制示例环境变量文件
cp .env.example .env
```

编辑`.env`文件，根据您的环境配置以下参数：

```
# 前端配置
VITE_API_URL=http://localhost:5000/api
VITE_PORT=3000

# 后端配置
PORT=5000
NODE_ENV=development

# JWT配置（用于用户认证）
JWT_SECRET=your-secret-key-here
JWT_EXPIRES_IN=7d
```

### 5. 启动应用

#### 方式一：同时启动前端和后端（推荐）

```bash
npm run start
```

此命令将使用pm2同时启动前端开发服务器和后端API服务器。

#### 方式二：分别启动前端和后端

如果您需要分开启动前后端，可以执行以下命令：

1. 启动后端服务器：
```bash
npm run server
```

2. 打开新的终端窗口，启动前端开发服务器：
```bash
npm run dev
```

### 6. 访问应用

启动成功后，您可以通过以下地址访问应用：

- **前端应用**: http://localhost:3000
- **后端API**: http://localhost:5000
- **API文档**: http://localhost:5000/api/docs

## 使用说明

### 登录系统

1. 打开浏览器，访问 http://localhost:3000
2. 使用提供的演示账号登录，或注册新账号
3. 登录后，您将看到系统的主界面

### 主要功能

1. **仪表盘**: 查看碳排放数据概览和关键指标
2. **数据采集**: 手动添加碳排放记录
3. **生态链**: 管理碳排放节点和连接
4. **AI助手**: 获取AI驱动的减排建议
5. **报告**: 生成和导出碳排放报告
6. **数据源集成**: 配置和管理外部数据源

### 数据源集成

1. 点击左侧菜单中的"数据源集成"
2. 点击"添加数据源"按钮
3. 选择数据源类型（API、数据库等）
4. 填写配置信息
5. 点击"保存"按钮创建数据源
6. 点击"测试连接"验证配置
7. 点击"同步数据"开始同步数据

## 常见问题

### Q1: 启动时出现"端口被占用"错误

A: 这意味着您的系统中已有其他应用占用了3000或5000端口。您可以：

1. 关闭占用端口的应用
2. 或修改`.env`文件中的端口配置：
   - 前端端口：修改`VITE_PORT`
   - 后端端口：修改`PORT`

### Q2: 无法连接到后端API

A: 请检查以下几点：

1. 确保后端服务器已成功启动
2. 检查`.env`文件中的`VITE_API_URL`配置是否正确
3. 检查浏览器控制台是否有CORS错误

### Q3: 登录失败

A: 请检查以下几点：

1. 确保后端服务器已启动
2. 检查JWT配置是否正确
3. 尝试使用演示账号登录

### Q4: 数据源同步失败

A: 请检查以下几点：

1. 数据源配置是否正确
2. 网络连接是否正常
3. 数据源是否可访问
4. 查看后端日志获取详细错误信息

## 演示账号

为了方便您体验系统，我们提供了以下演示账号：

### 管理员账号
- **邮箱**: admin@example.com
- **密码**: admin123

### 普通用户账号
- **邮箱**: user@example.com
- **密码**: user123

## 停止应用

如果您使用了`npm run start`命令启动应用，可以使用以下命令停止所有服务：

```bash
npm run stop
```

如果您分别启动了前后端，可以在各自的终端窗口中按`Ctrl+C`停止服务。

## 联系方式

如果您在使用过程中遇到任何问题，请联系我们的技术支持团队。
